# Техническое задание: Проект "Система управления личной библиотекой"

## Обязательные требования: Язык C++, система сборки CMake

---

## 1. Описание проекта

Разработать консольное приложение для управления личной библиотекой с использованием объектно-ориентированного программирования. Приложение должно демонстрировать практическое применение основных концепций ООП: классы, объекты, инкапсуляция, наследование и полиморфизм. Студент должен уметь объяснить каждое понятие.

**Основная цель:** Создать рабочее приложение, которое студент сможет использовать и расширять, закрепляя знания ООП на практике. Требуется реализовать все строго по Техническому заданию (этому файлу), любые отхождения штрафуются.

---

## 2. Требования к структуре проекта

### 2.1 Организация файлов
```
library_project/
├── src/
│   ├── Book.h
│   ├── Book.cpp
│   ├── Library.h
│   ├── Library.cpp
│   ├── User.h
│   ├── User.cpp
│   └── main.cpp
├── data/
│   └── library_data.txt
├── CMakeLists.txt
├── .gitignore
└── README.md
```

### 2.2 Система контроля версий
- Проект **обязательно** должен быть размещён в репозитории GitHub (только файлы, указанные выше. остальное должно быть игнорировано посредством .gitignore)
- Минимум 8-10 коммитов с осмысленными сообщениями (делите код на логичные этапы и делайте коммит)
- В README.md должны быть инструкции по сборке и запуску
- Первый коммит: пустая структура проекта (Можно readme)
- Последний коммит: финальная работающая версия

---

## 3. Основные классы и функционал

### 3.1 Класс `Book`
**Назначение:** Представление одной книги в библиотеке

**Приватные члены:**
- `std::string title` - название книги
- `std::string author` - автор
- `int year` - год издания
- `std::string isbn` - уникальный ISBN
- `bool isAvailable` - доступна ли книга для выдачи
- `std::string borrowedBy` - фамилия пользователя, взявшего книгу

**Публичные методы:**
- Конструктор с параметрами
- Getter-методы для всех полей
- `void borrowBook(const std::string& userName)` - выдать книгу
- `void returnBook()` - вернуть книгу
- `void displayInfo()` - вывести информацию о книге в консоль

**Обязательное требование:** 
- В конструкторе реализовать валидацию года издания (должен быть между 1450 и текущим годом)
- При попытке некорректного ввода выбросить исключение

### 3.2 Класс `User`
**Назначение:** Представление пользователя библиотеки

**Приватные члены:**
- `std::string name` - фамилия пользователя
- `std::string userId` - уникальный ID (вида "USR_001")
- `std::vector<std::string> borrowedBooks` - список ISBN выданных книг
- `int maxBooksAllowed` - максимум книг, которые может взять (по умолчанию 3)

**Публичные методы:**
- Конструктор
- Getter-методы
- `bool canBorrowMore()` - может ли ещё взять книгу
- `void addBook(const std::string& isbn)` - добавить книгу в список взятых
- `void removeBook(const std::string& isbn)` - убрать книгу из списка
- `void displayProfile()` - вывести профиль пользователя

### 3.3 Класс `Library`
**Назначение:** Управление всей библиотекой

**Приватные члены:**
- `std::vector<Book> books` - каталог книг
- `std::vector<User> users` - список зарегистрированных пользователей
- `std::string dataFile` - путь к файлу с сохранёнными данными

**Публичные методы:**
- Конструктор, в котором загружаются данные из файла
- `void addBook(const Book& book)` - добавить книгу
- `void addUser(const User& user)` - зарегистрировать пользователя
- `void borrowBook(const std::string& userName, const std::string& isbn)` - выдать книгу пользователю
- `void returnBook(const std::string& isbn)` - принять книгу от пользователя
- `Book* findBookByISBN(const std::string& isbn)` - найти книгу по ISBN (может вернуть nullptr)
- `User* findUserByName(const std::string& name)` - найти пользователя по фамилии
- `void displayAllBooks()` - вывести каталог всех книг
- `void displayAllUsers()` - вывести список всех пользователей
- `void saveToFile()` - сохранить состояние библиотеки в файл
- `void loadFromFile()` - загрузить состояние из файла

---

## 4. Сценарий работы приложения

Приложение должно предоставлять **интерактивное консольное меню** со следующими опциями:

```
=== БИБЛИОТЕКА ===
1. Просмотреть все книги
2. Просмотреть всех пользователей
3. Добавить новую книгу
4. Зарегистрировать пользователя
5. Выдать книгу пользователю
6. Принять книгу от пользователя
7. Поиск книги по ISBN
8. Просмотреть профиль пользователя
9. Сохранить данные в файл
10. Выход
Ваш выбор: _
```

**Требования к меню:**
- Должна быть валидация ввода (перехват некорректных вводов)
- При выборе опций должны быть дополнительные подсказки для ввода данных
- После каждой операции выводить результат (успешно/ошибка)
- Меню должно работать циклически до выбора "Выход"

---

## 5. Обработка данных

### 5.1 Формат файла данных (data/library_data.txt)
Файл должен содержать две секции, разделённые строкой `---USERS---`:

**Секция книг (до разделителя):**
```
BOOK
Title: Война и мир
Author: Лев Толстой
Year: 1869
ISBN: 978-5-17-70490-8
Available: yes
BorrowedBy: 
---USERS---
```

**Секция пользователей:**
```
USER
Name: Иванов
UserID: USR_001
BorrowedBooks: 978-5-17-70490-8|978-3-16-148410-0
MaxBooks: 3
```

### 5.2 Сохранение и загрузка
- При запуске программы автоматически загружаются данные из файла
- При выборе опции "Сохранить" данные записываются в файл в правильном формате
- Если файл не существует, создаётся пустой файл с заготовками

---

## 6. Особенности реализации

### 6.1 Обязательные требования (в коде должны быть явно видны)

1. **Инкапсуляция:**
   - Все данные членов private
   - Доступ через public методы
   - Getter-методы для чтения

2. **Валидация:**
   - Года издания книги
   - ISBN (не пустой, уникальный)
   - Количества книг у пользователя
   - Попыток двойной выдачи/возврата

3. **Обработка ошибок:**
   - Использовать try-catch блоки
   - Бросать исключения при ошибках валидации
   - Перехватывать исключения в main()

4. **Работа с указателями:**
   - В методах findBook() и findUser() использовать указатели
   - Проверять на nullptr перед использованием

5. **Использование STL:**
   - `std::vector` для хранения книг и пользователей
   - `std::string` для строк
   - Методы vector (push_back, find, erase и т.д.)

### 6.2 Архитектурные решения

- Каждый класс должен быть в отдельной паре файлов (.h и .cpp)
- В заголовочных файлах - только объявления
- В .cpp файлах - реализация
- Использовать `#ifndef` guards в заголовочных файлах

---

## 7. Сборка проекта

### 7.1 CMakeLists.txt
Проект **обязательно** должен собираться через CMake:

```cmake
cmake_minimum_required(VERSION 3.10)
project(LibraryManagement)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

add_executable(library 
    src/main.cpp
    src/Book.cpp
    src/Library.cpp
    src/User.cpp
)

include_directories(src)
```

**Команды сборки:**
```bash
mkdir build
cd build
cmake ..
make
./library
```

### 7.2 .gitignore
Должны быть исключены:
- build/
- *.o
- *.a
- .DS_Store

А также другие файлы от вашей IDE.
---

## 8. GitHub требования

1. **Репозиторий должен содержать:**
   - Все исходные коды
   - CMakeLists.txt
   - README.md с инструкциями
   - .gitignore файл
   - Минимум 8 осмысленных коммитов

2. **История коммитов должна показывать процесс разработки:**
   - Первый коммит: "Initial project structure"
   - Последующие: добавление каждого класса, функционала, исправления
   - Финальный: (пр. "Final working version")

3. **README.md должен содержать:**
   - Описание проекта (2-3 предложения)
   - Требования (C++17, CMake 3.10+)
   - Инструкции по сборке (шаг за шагом)
   - Примеры использования (скриншоты консоли или описание)
   - Список реализованных фич

---

## 9. Рекомендации по разработке

1. **Начните с проектирования:** Нарисуйте диаграмму классов на бумаге перед началом кодирования

2. **Разбивайте на этапы:**
   - Этап 1: Структура классов и конструкторы
   - Этап 2: Базовые методы getter/setter
   - Этап 3: Логика основного функционала
   - Этап 4: Сохранение/загрузка файлов
   - Этап 5: Консольное меню
   - Этап 6: Обработка ошибок и исключения

3. **Тестируйте постепенно:**
   - После каждого класса напишите простой main для проверки
   - Затем интегрируйте в полное приложение

4. **Используйте Git правильно:**
   - Коммитьте после каждого завершённого этапа
   - Сообщение коммита должно описывать, что было добавлено
   - Пример: "Add Book class with validation" или "Implement file save functionality"

5. **Тестовые данные:**
   - Подготовьте несколько тестовых книг и пользователей в data/library_data.txt
   - Используйте разные ISBN, годы, авторов для полноты

---

## 10. Примеры тестовых данных для data/library_data.txt

```
BOOK
Title: Война и мир
Author: Лев Толстой
Year: 1869
ISBN: 978-5-17-70490-8
Available: yes
BorrowedBy: 

BOOK
Title: Преступление и наказание
Author: Федор Достоевский
Year: 1866
ISBN: 978-5-17-77192-5
Available: no
BorrowedBy: Иванов

BOOK
Title: C++ Primer
Author: Stanley Lippman
Year: 2012
ISBN: 978-0-13-110388-8
Available: yes
BorrowedBy: 

---USERS---

USER
Name: Иванов
UserID: USR_001
BorrowedBooks: 978-5-17-77192-5
MaxBooks: 3

USER
Name: Петров
UserID: USR_002
BorrowedBooks: 
MaxBooks: 3
```

---

## Дополнительные вызовы (для улучшения оценки)

После выполнения основного задания студент может добавить:

- **Поиск по автору:** Метод findBooksByAuthor()
- **История выдачи:** Для каждой книги сохранять дату выдачи/возврата
- **Сортировка:** Вывод книг отсортированных по году, автору, названию
- **Штрафы:** Система начисления штрафов за просрочку возврата
- **Категории:** Разделение книг по жанрам/категориям через наследование

---

## Что студент получит в результате

1. Практический опыт разработки на C++
2. Понимание ООП через реальный проект
3. Навыки работы с CMake и системой сборки
4. Опыт использования GitHub и контроля версий
5. Работающее приложение, которое можно использовать и расширять
6. Портфолио-проект для резюме
7. Умение работать строго по заданному Техническому заданию
